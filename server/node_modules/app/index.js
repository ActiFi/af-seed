const express = require('express');
const bodyParser = require('body-parser');
const bearerToken = require('express-bearer-token');

console.log('Express: Initializing App...');

var app = express();

// parses incoming request body
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));

// makes auth tokens available via: req.token
// https://www.npmjs.com/package/express-bearer-token
app.use(bearerToken({ headerKey: 'Bearer', bodyKey: 'sessionToken', queryKey: 'sessionToken', reqKey: 'sessionToken' }));

// initialize our view engine
require('./view-engine')(app);

module.exports = app;